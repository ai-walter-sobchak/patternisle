<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Game UI</title>

  <!-- HUD Styles -->
  <link rel="stylesheet" href="{{CDN_ASSETS_URL}}/ui/hud.css" />
</head>

<body>

  <!-- ============================= -->
  <!-- HUD ROOT -->
  <!-- ============================= -->

  <div id="hud-root" class="hud">

    <div class="hud-top">

      <!-- Left: Shards -->
      <div class="hud-shards" id="hud-shards">
        <span class="hud-shards-icon" aria-hidden="true">◆</span>
        <span class="hud-shards-value" id="hud-shards-value">0</span>
      </div>

      <!-- Center: Round -->
      <div class="hud-round-wrap">
        <div class="hud-round">
          <span class="hud-round-num" id="hud-round-num">Round 1</span>
          <span class="hud-round-status running" id="hud-round-status">RUNNING</span>
        </div>
      </div>

      <!-- Right: Countdown + Settings -->
      <div class="hud-top-right">
        <div class="hud-countdown-wrap">
          <div class="hud-countdown hidden" id="hud-countdown">0s</div>
        </div>

        <button
          type="button"
          class="hud-settings-btn"
          aria-label="HUD settings"
          title="HUD settings">
          ⚙
        </button>
      </div>

    </div>

    <!-- Feed + Toasts -->
    <div class="hud-feed"></div>
    <div class="hud-toast-stack"></div>

    <!-- Settings Panel -->
    <div class="hud-settings-panel" id="hud-settings-panel" aria-hidden="true">

      <h3>HUD Settings</h3>

      <div class="hud-settings-row">
        <label>Scale</label>
        <div class="hud-settings-scale" role="group" aria-label="HUD scale">
          <button type="button" data-scale="0.8">0.8</button>
          <button type="button" data-scale="1">1.0</button>
          <button type="button" data-scale="1.2">1.2</button>
        </div>
      </div>

      <div class="hud-settings-row">
        <label for="hud-reduce-motion">Reduce motion</label>
        <button
          type="button"
          class="hud-settings-toggle"
          id="hud-reduce-motion"
          role="switch"
          aria-checked="false">
        </button>
      </div>

      <div class="hud-settings-row">
        <label for="hud-mute-sounds">Mute UI sounds</label>
        <button
          type="button"
          class="hud-settings-toggle"
          id="hud-mute-sounds"
          role="switch"
          aria-checked="false">
        </button>
      </div>

    </div>

  </div>

  <!-- ============================= -->
  <!-- Ping Debug -->
  <!-- ============================= -->

  <div id="ping-debug" class="ping-debug"></div>

  <!-- ============================= -->
  <!-- Mobile Controls -->
  <!-- ============================= -->

  <div class="mobile-controls">
    <a id="mobile-interact-button" class="mobile-button">
      <img src="{{CDN_ASSETS_URL}}/icons/target.png" />
    </a>

    <a id="mobile-jump-button" class="mobile-button">
      <img src="{{CDN_ASSETS_URL}}/icons/jump.png" />
    </a>
  </div>

  <!-- ============================= -->
  <!-- Scripts -->
  <!-- ============================= -->

  <script src="{{CDN_ASSETS_URL}}/ui/hud.js"></script>

  <script>
    window.addEventListener('DOMContentLoaded', () => {

      const mobileInteractButton = document.getElementById('mobile-interact-button');
      const mobileJumpButton = document.getElementById('mobile-jump-button');

      if (mobileInteractButton) {
        mobileInteractButton.addEventListener('touchstart', e => {
          e.preventDefault();
          mobileInteractButton.classList.add('active');
          if (window.hytopia) hytopia.pressInput('ml', true);
        });

        mobileInteractButton.addEventListener('touchend', e => {
          e.preventDefault();
          mobileInteractButton.classList.remove('active');
          if (window.hytopia) hytopia.pressInput('ml', false);
        });
      }

      if (mobileJumpButton) {
        mobileJumpButton.addEventListener('touchstart', e => {
          e.preventDefault();
          mobileJumpButton.classList.add('active');
          if (window.hytopia) hytopia.pressInput(' ', true);
        });

        mobileJumpButton.addEventListener('touchend', e => {
          e.preventDefault();
          mobileJumpButton.classList.remove('active');
          if (window.hytopia) hytopia.pressInput(' ', false);
        });
      }

    });
  </script>

  <!-- ============================= -->
  <!-- Styles -->
  <!-- ============================= -->

  <style>
    .ping-debug {
      position: fixed;
      top: 4px;
      left: 4px;
      font-size: 10px;
      font-family: monospace;
      color: rgba(0, 255, 0, 0.9);
      pointer-events: none;
      z-index: 9999;
    }

    .mobile-controls {
      display: none;
    }

    body.mobile .mobile-controls {
      display: flex;
      gap: 14px;
      position: fixed;
      bottom: 40px;
      right: 40px;
    }

    .mobile-button {
      background-color: rgba(0, 0, 0, 0.5);
      border-radius: 50%;
      align-items: center;
      justify-content: center;
      display: flex;
      width: 50px;
      height: 50px;
      transition: all 0.15s ease;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      pointer-events: auto !important;
    }

    .mobile-button img {
      width: 22px;
      height: 22px;
    }

    .mobile-button.active {
      transform: scale(0.92);
      background-color: rgba(0, 0, 0, 0.75);
    }
  </style>

</body>
</html>
